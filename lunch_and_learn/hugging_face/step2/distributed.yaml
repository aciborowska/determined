name: vision transformer logging metrics
environment:
  environment_variables:
    - NCCL_SOCKET_IFNAME=ens,eth,ib
resources:
  slots_per_trial: 2
searcher:
  name: single
  max_length:
    batches: 100
  metric: eval_loss
entrypoint: >-
  python -m determined.launch.torch_distributed
  python step2/image_classification.py 
  --dataset_name food101  
  --output_dir ./food101_outputs/  
  --remove_unused_columns False 
  --do_train  
  --do_eval 
  --max_steps 100
  --per_device_train_batch_size 8 
  --per_device_eval_batch_size 8 
  --logging_strategy steps 
  --logging_steps 10 
  --evaluation_strategy steps
  --learning_rate 1e-5
  --eval_steps 10
  --save_total_limit 1 
  --seed 1337
  --save_strategy steps
  --save_steps 100
  --cache_dir shared_fs/.cache
max_restarts: 0
